# inspiration from https://github.com/Nemo157/roaring-rs/blob/master/.travis.yml
language: rust
rust:
  - stable
  - beta
  - nightly-2017-02-13
cache: cargo
before_install:
  - sudo apt-get update -qq
install:
  - sudo apt-get install -qq gcc-avr binutils-avr avr-libc
# before_script:
  # - (cargo install rustfmt || true)
  # - bash -c 'if [[ "$TRAVIS_RUST_VERSION" == "nightly" ]]; then
      # cargo install clippy --force;
    # fi'
script:
  - export PATH=$PATH:~/.cargo/bin
  # - cargo fmt -- --write-mode=diff
  - cargo build --features strict && cargo test --features strict
  - cargo build --features "strict no_gui" && cargo test --features "strict no_gui"
  - bash -c 'if [[ "$TRAVIS_RUST_VERSION" == "nightly-2017-02-13" ]]; then
       cargo build --features "strict jit" && cargo test --features "strict jit";
    fi'
  - bash -c 'if [[ "$TRAVIS_RUST_VERSION" == "nightly-2017-02-13" ]]; then
       cargo build --features "strict no_gui jit" && cargo test --features "strict no_gui jit";
    fi'
